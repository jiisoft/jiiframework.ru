Конфигурации
============

Конфигурации широко используются в Jii при создании новых объектов или при инициализации уже существующих объектов. 
Обычно конфигурации включают в себя названия классов создаваемых объектов и список первоначальных значений,
которые должны быть присвоены [свойствам](concept-properties) объекта. Также в конфигурациях можно указать список
[обработчиков событий](concept-events) объекта, и/или список [поведений](concept-behaviors) объекта.

Пример конфигурации подключения к базе данных и дальнейшей инициализации подключения: 

```js
var config = {
    className: 'Jii.sql.mysql.Connection',
    host: '127.0.0.1',
    database: 'demo',
    username: 'root',
    password: '',
    charset: 'utf8'
};

var db = Jii.createObject(config);
```

Метод [[Jii.createObject()]] принимает в качестве аргумента объект с конфигурацией и создаёт объект указанного в них класса.
При этом оставшаяся часть конфигурации используется для инициализации свойств, обработчиков событий и поведений объекта.

Если объект уже создан, вы можете использовать [[Jii.configure()]] для того, чтобы инициализировать свойства объекта
при помощи объекта с конфигурацией:

```js
Jii.configure(object, config);
```

Обратите внимание, что в этом случае объект с конфигурацией не должен содержать ключ `className`.

## Формат конфигурации <span id="configuration-format"></span>

Формат конфигурации выглядит следующим образом:

```js
{
    className: 'ClassName',
    propertyName: 'propertyValue',
    'on eventName': eventHandler,
    'as behaviorName': behaviorConfig
}
```

где

* Элемент `className` указывает абсолютное имя класса создаваемого объекта.
* Элементы `propertyName` указывают первоначальные значения свойств создаваемого объекта. Ключи являются именами свойств
  создаваемого объекта, а значения — начальными значениями свойств создаваемого объекта.
  Таким способом могут быть установлены только публичные переменные объекта и его [свойства](concept-properties),
  созданные через геттеры и сеттеры.
* Элементы `on eventName` указывают на то, какие обработчики должны быть прикреплены к [событиям](concept-events) объекта.
  Обратите внимание, что ключи объекта начинаются с `on `. Чтобы узнать весь список поддерживаемых видов
  обработчиков событий обратитесь в раздел [события](concept-events)
* Элементы `as behaviorName` указывают на то, какие [поведения](concept-behaviors) должны быть внедрены в объект.
  Обратите внимание, что ключи объекта начинаются с `as `; а `behaviorConfig` представляет собой конфигурацию для
  создания [поведения](concept-behaviors), похожую на все остальные конфигурации.

Пример конфигурации с установкой первоначальных значений свойств объекта, обработчика событий и поведения:

```js
{
    className: 'app.components.SearchEngine',
    apiKey: 'xxxxxxxx',
    'on search': function (event) {
        Jii.info("Keyword searched: " + event.keyword);
    },
    'as indexer': {
        className: 'app.components.IndexerBehavior'
        // ... начальные значения свойств ...
    }
}
```

## Конфигурация приложения <span id="application-configurations"></span>

Конфигурация [приложения](structure-applications), пожалуй, самая сложная из используемых в фреймворке.
Причина в том, что класс [[Jii.application.WebApplication|application]] содержит большое количество конфигурируемых
свойств и событий. Более того, свойство приложения [[Jii.application.WebApplication.components|components]]
может принимать объект с конфигурацией для создания компонентов, регистрируемых на уровне приложения.
Пример конфигурации приложения:

```js
var config = {
    id: 'basic',
    basePath: __dirname,
    components': {
        urlManager: {
            className: 'Jii.urlManager.UrlManager',
            rules: {
                '': 'site/index',
                'guide': 'site/guide',
                'guide/<page>': 'site/guide'
            }
        },
        http: {
            className: 'Jii.httpServer.HttpServer'
        },
        view: {
            className: 'Jii.view.ServerWebView'
        }
    }
};
```

Ключ `className` в данной конфигурации не указывается. Причина в том, что класс вызывается по полному имени во
входном скрипте:

```js
Jii.createWebApplication({config});
```

За более подробной документацией о настройках свойства `components` в конфигурации приложения обратитесь к главе
[приложения](structure-applications).
