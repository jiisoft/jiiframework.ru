Комет
=======

Для начала немного справки о том, что такое комет ([wiki](https://ru.wikipedia.org/wiki/Comet_(%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5))):

> Comet (в веб-разработке) — любая модель работы веб-приложения, при которой постоянное HTTP-соединение позволяет
> веб-серверу отправлять (push) данные браузеру без дополнительного запроса со стороны браузера. Общая черта таких
> моделей состоит в том, что все они основаны на технологиях, непосредственно поддерживаемых браузером
> (напр., JavaScript), а не на проприетарных плагинах. Теоретически модель Comet отличается от изначальной концепции
> всемирной паутины, при которой для обновления страницы браузер запрашивает её полностью или частично. Однако на
> практике приложения Comet обычно используют Ajax c long polling для проверки наличия новой информации на сервере.

Jii-comet - это масштабируемый, готовый к высоким нагрузкам и плохому интернету транспорт, реализующий постоянную связь
между клиентом и сервером для мгновенного обмена данными.

Jii-comet предоставляет набор компонентов и классов, которые содержат набор методов и свойств для упрощения обмена
сообщениями между каналами, подписки на них, обмена данными между серверами и так далее. Сам модуль не умеет доставлять
сообщения на клиент и обратно, но в нем заложена абстракция, чтобы это можно было делать любой из существующих
популярных библиотек (например, socket.io, sockjs), а так же чтобы это было надежно и масштибаруемо.

## Конфигурация

Комет устанавливается как [компонент приложения](structure-application-components), на сервере и клиенте соответственно.
На сервере комет открывает и "слушает" данные из указанного порта, а клиент при инициализации приложения подключается
к этому порту и ждет информацию.

Подробнее о конфигурации смотрите в разделе [комет-сервер](comet-server) и [комет-клиент](comet-client).

## Внутренний канал связи

Как уже писалось выше, Jii-comet имеет абстракцию, позволяющую использовать любую библиотеку в качестве внутреннего
канала связи между клиентом и сервером. На данный момент сделан адаптер для библиотеки
[sockjs](https://github.com/sockjs/sockjs-client), в будущем появится и для [socket.io](http://socket.io/).

В конфигурации транспорт объявляется в секции `transport`. По-умолчанию, используется класс
`Jii.comet.server.transport.Sockjs` на севере и `Jii.comet.client.transport.Sockjs` на клиенте.
Транспорт можно конфигурировать и переопределять через конфигурацию:

```js
comet: {
    className: 'Jii.comet.client.Client',
    transport: {
        className: 'Jii.comet.client.transport.Sockjs',
        transports: [
            'websocket',
            'xhr-streaming',
            'xdr-streaming',
            'jsonp-polling'
        ]
    }
}
```
